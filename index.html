<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Para ti amorcitoüíñ</title>

<style>
body{
    margin:0;
    font-family: Arial, sans-serif;
    background:black;
    height:100vh;
    overflow:hidden;
    display:flex;
    justify-content:center;
    align-items:center;
    flex-direction:column;
    text-align:center;
    color:white;
    transition: background 1s ease;
}

h1{
    font-size:40px;
}

button{
    padding:15px 30px;
    font-size:18px;
    margin:15px;
    border:none;
    border-radius:12px;
    cursor:pointer;
    position:relative;
}

#si{
    background-color:#ff2e63;
    color:white;
}

#no{
    background-color:#333;
    color:white;
    position:absolute;
}

.foto{
    width:120px;
    position:absolute;
    border-radius:15px;
    box-shadow:0 0 15px rgba(0,0,0,0.4);
    cursor:pointer;
    opacity:0;
    transition: opacity 1s ease;
}

#score{
    position:fixed;
    top:20px;
    left:20px;
    font-size:20px;
    font-weight:bold;
    z-index:1000;
}

.corazon{
    position:fixed;
    font-size:20px;
    animation: flotar 4s linear infinite;
}

@keyframes flotar{
    0%{ transform:translateY(0) scale(1); opacity:1; }
    100%{ transform:translateY(-800px) scale(1.5); opacity:0; }
}

#flash{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:white;
    opacity:0;
    pointer-events:none;
    transition: opacity 0.3s ease;
    z-index:9999;
}
</style>
</head>

<body>

<div id="flash"></div>

<h1>¬øPuedo ser tu San Valent√≠n amocito? üíò</h1>
<button id="si" onclick="aceptar()">S√≠ üíñ</button>
<button id="no" onmouseover="mover()">No jeje</button>

<div id="player"></div>
<script src="https://www.youtube.com/iframe_api"></script>

<script>

let score = 0;
let velocidadBase = 2;
let fotos = [];
let player;
let volumen = 0;

function aceptar(){

    // FLASH BLANCO
    const flash = document.getElementById("flash");
    flash.style.opacity = "1";

    setTimeout(() => {
        flash.style.opacity = "0";
    }, 200);

    // Cambiar fondo a rosa despu√©s del flash
    setTimeout(() => {
        document.body.style.background = "linear-gradient(45deg, #ff758c, #ff7eb3)";
    }, 200);

    // Limpiar contenido inicial
    setTimeout(() => {
        document.body.innerHTML += `
            <div id="score">Puntos: 0</div>
            <div id="contenedorFotos"></div>
            <h1 style="position:fixed; bottom:20px; width:100%;">
                Te amo infinitamenteüíñ<br>y eternamente‚ù§Ô∏è
            </h1>
            <div id="player"></div>
        `;

        iniciarMusica();
        generarFotos();
        generarCorazones();

    }, 300);
}

function iniciarMusica(){
    player = new YT.Player('player', {
        height: '0',
        width: '0',
        videoId: 'FM7ALFsOH4g',
        playerVars: {
            'autoplay': 1,
            'controls': 0,
            'loop': 1,
            'playlist': 'FM7ALFsOH4g'
        },
        events: {
            'onReady': function(event){
                event.target.setVolume(0);
                fadeIn();
            }
        }
    });
}

function fadeIn(){
    volumen = 0;
    let fade = setInterval(() => {
        volumen += 5;
        if(volumen >= 60){
            clearInterval(fade);
        }
        player.setVolume(volumen);
    }, 200);
}

function mover(){
    let boton = document.getElementById("no");
    let x = Math.random() * (window.innerWidth - 100);
    let y = Math.random() * (window.innerHeight - 50);
    boton.style.left = x + "px";
    boton.style.top = y + "px";
}

function generarFotos(){
    const contenedor = document.getElementById("contenedorFotos");

    for(let i = 1; i <= 15; i++){
        setTimeout(() => {

            const img = document.createElement("img");
            img.src = "Foto" + i + ".jpg";
            img.classList.add("foto");

            posicionarAleatorio(img);

            img.dx = (Math.random() * 2 + 1) * (Math.random() < 0.5 ? -1 : 1);
            img.dy = (Math.random() * 2 + 1) * (Math.random() < 0.5 ? -1 : 1);

            img.addEventListener("click", () => convertirEnCorazon(img));

            fotos.push(img);
            contenedor.appendChild(img);

            setTimeout(() => {
                img.style.opacity = "1";
            }, 50);

        }, i * 200); // aparecen poco a poco
    }

    animar();
}

function posicionarAleatorio(img){
    img.style.left = Math.random() * (window.innerWidth - 150) + "px";
    img.style.top = Math.random() * (window.innerHeight - 150) + "px";
}

function convertirEnCorazon(img){
    score++;
    velocidadBase += 0.2;
    document.getElementById("score").innerText = "Puntos: " + score;

    const x = img.offsetLeft;
    const y = img.offsetTop;

    img.style.display = "none";

    const corazon = document.createElement("div");
    corazon.innerHTML = "üíñ";
    corazon.style.position = "absolute";
    corazon.style.left = x + "px";
    corazon.style.top = y + "px";
    corazon.style.fontSize = "40px";
    corazon.style.transition = "all 0.6s ease";
    corazon.style.opacity = "1";

    document.body.appendChild(corazon);

    setTimeout(() => {
        corazon.style.transform = "scale(1.6)";
        corazon.style.opacity = "0";
    }, 50);

    setTimeout(() => {
        corazon.remove();
        posicionarAleatorio(img);
        img.style.display = "block";
    }, 600);
}

function animar(){
    fotos.forEach(img => {

        if(img.style.display === "none") return;

        let x = img.offsetLeft;
        let y = img.offsetTop;

        x += img.dx * velocidadBase;
        y += img.dy * velocidadBase;

        if(x <= 0 || x >= window.innerWidth - 120){
            img.dx *= -1;
        }

        if(y <= 0 || y >= window.innerHeight - 120){
            img.dy *= -1;
        }

        img.style.left = x + "px";
        img.style.top = y + "px";
    });

    requestAnimationFrame(animar);
}

function generarCorazones(){
    setInterval(() => {
        const corazon = document.createElement("div");
        corazon.classList.add("corazon");
        corazon.innerHTML = "üíó";
        corazon.style.left = Math.random() * window.innerWidth + "px";
        corazon.style.bottom = "0px";

        document.body.appendChild(corazon);

        setTimeout(() => {
            corazon.remove();
        }, 4000);

    }, 300);
}

</script>

</body>
</html>
